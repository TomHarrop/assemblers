Bootstrap: docker
From: trinityrnaseq/trinityrnaseq:2.9.0

%help
    Container for Trinity 2.9.0 (patched)
    https://github.com/trinityrnaseq/trinityrnaseq/issues/782#issuecomment-577207574
    https://github.com/trinityrnaseq/trinityrnaseq


%labels
    VERSION "Trinity 2.9.0-patched"

%post    
    # replace Node_alignment.py with the patched version 
    cd /usr/local/bin/trinityrnaseq/Analysis/SuperTranscripts/pylib || exit 1
    rm -f Node_alignment.py
    wget https://github.com/trinityrnaseq/trinityrnaseq/blob/devel/Analysis/SuperTranscripts/pylib/Node_alignment.py
    chmod 755 Node_alignment.py

%runscript
    exec /usr/local/bin/trinityrnaseq/Trinity "$@"
